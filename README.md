## Что делает программа?

Программа написана по програмному заданию лаборатории компьютерной графики ВМК и сделана на каркасе авторов.
Программа совмещает три чернобелых канала в одно цветное изображение.

В качестве данных используются фотографии Прокудина-Горсокого.

Каждая фотография состоит из трех изображений, выстроенных вертикально. Однако для того чтобы их совместить, необходимо разделить их и обрезать по краям, чтобы засветка на краях не портила значения метрики совмещения и в целом, чтобы выделить смысловую часть изображения.

Для удаления краёв пленки реализован детектор краев Canny. Cмысл алгоритма Canny в следующем:

1. Изображение выравнивается фильтром Собеля, для того чтобы исключить влияние пиксельного шума.
2. Вычисляются градиенты изображения, для этого:
    1. Вычисляются производные по х и по у спомощью свертки с соответствующими ядрами Собеля
    2. Вычисляется модуль градиента в каждом пикселе, как корень из суммы квадратов производных
    3. Вычисляется направление градента, как знаковый арктангенс от производных по х и по у
3. Для каждого пикселя делается нулевым модуль, если он меньше или равен модулей соседей.
4. Отсечение по порогу - часть пикселей, меньших порога обнуляется. Пиксели, большие второго порога, счиатются границами.

Затем собственно происходит совмещение изображений. В диапазоне [-15 .. 15] уменьшенные копии каждого из трех каналов попарно сравниваются по метрике среднеквадратичного отклонения. Можно использовать функцию метрики кросс-корреляции, но в данном случае выборано отклонение.

Выбираются два новых сдвига, и оригинальные изображения сравниваются в меньшем интервале.

Результат сохраняется с помощью библиотеки EasyBMP.

Для меня данная программа была одним из первых учебных проектов на С++.

## Как запустить программу

```make all``` для компиляции

Затем необходимо выдать права на выполнение файлам ./build/bin/main и ./batch_run.sh

```
chmod +x ./build/bin/main
chmod +x ./batch_run.sh
````
Выполнить программу на нескольких файлах проще всего с помощью команды `./batch_run.sh`
